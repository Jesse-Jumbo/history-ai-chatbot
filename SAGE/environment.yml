# =============================================================================
# SAGE Conda Environment
# Based on SAM (Style-based Age Manipulation)
# =============================================================================
#
# 使用方式:
#   conda env create -f environment.yml
#   conda activate sage
#
# 更新環境:
#   conda env update -f environment.yml
#
# =============================================================================

name: sage
channels:
  - pytorch
  - nvidia
  - conda-forge
  - defaults

dependencies:
  # Python
  - python=3.10

  # Core Scientific Computing
  - numpy>=1.21.0
  - scipy>=1.7.0
  - pillow>=9.0.0
  - matplotlib>=3.5.0

  # OpenCV
  - opencv>=4.5.0

  # Build Tools
  - ninja>=1.11.0
  - cmake>=3.20.0

  # Development Tools
  - pip
  - black>=23.0.0

  # pip dependencies
  - pip:
      # PyTorch with CUDA 12.4 (RTX 40 series)
      - --extra-index-url https://download.pytorch.org/whl/cu124
      - torch>=2.0.0
      - torchvision>=0.15.0

      # Face Detection & Alignment
      - mediapipe>=0.10.8
      - dlib>=19.24.0

      # Model Download
      - gdown>=4.7.0

      # API Server
      - fastapi>=0.104.0
      - uvicorn>=0.24.0
      - python-multipart>=0.0.6
      - httpx>=0.25.0

      # Utilities
      - python-dotenv>=1.0.0
      - tensorboard>=2.10.0
      - tqdm>=4.60.0

      # Testing
      - pytest>=7.4.0
